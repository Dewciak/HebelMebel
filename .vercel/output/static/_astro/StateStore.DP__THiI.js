import{r as c}from"./index.l2PZgWEW.js";let u=[],r=0;const o=4;let p=i=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=n.push(t),()=>{for(let s=r+o;s<u.length;)u[s]===t?u.splice(s,o):s+=o;let l=n.indexOf(t);~l&&(n.splice(l,1),--e.lc||e.off())}},notify(t,l){let s=!u.length;for(let f of n)u.push(f,e.value,t,l);if(s){for(r=0;r<u.length;r+=o)u[r](u[r+1],u[r+2],u[r+3]);u.length=0}},off(){},set(t){let l=e.value;l!==t&&(e.value=t,e.notify(l))},subscribe(t){let l=e.listen(t);return t(e.value),l},value:i};return e};function d(i,n,e){let t=new Set([...n,void 0]);return i.listen((l,s,f)=>{t.has(f)&&e(l,s,f)})}let a=(i,n)=>e=>{i.current=e,n()};function S(i,{keys:n,deps:e=[i,n]}={}){let t=c.useRef();t.current=i.get();let l=c.useCallback(f=>n?.length>0?d(i,n,a(t,f)):i.listen(a(t,f)),e),s=()=>t.current;return c.useSyncExternalStore(l,s,s)}const b=p(!1),h=p(void 0);export{b as i,h as s,S as u};
